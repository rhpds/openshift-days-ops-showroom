= Cloud Integration & Infrastructure

== Module Overview

**Duration:** 10 minutes +
**Format:** Educational overview (no hands-on) +
**Audience:** IT Operations, Infrastructure Architects, Platform Engineers

[IMPORTANT]
====
**This module is informational only.**

This workshop environment uses a platform-agnostic configuration. The content below explains how OpenShift integrates with various cloud providers so you understand the concepts for your own deployments.

The code examples shown are for **reference only** to illustrate concepts.
====

**Narrative Context:**

OpenShift runs on virtually any infrastructureâ€”public clouds, private clouds, or bare metal. This module explains how OpenShift abstracts cloud provider APIs so you can manage infrastructure using the same `oc` commands regardless of where you deploy.

== Learning Objectives

By the end of this module, you will understand:

* OpenShift deployment options across cloud providers
* How OpenShift identifies and integrates with its underlying platform
* Storage abstraction through CSI drivers and storage classes
* How ODF provides unified storage across any infrastructure
* The value of platform consistency for operations teams

== OpenShift: Run Anywhere, Manage Consistently

One of OpenShift's core strengths is **infrastructure portability**. Your teams learn one platform and use it everywhere.

=== Managed Cloud Services

Red Hat partners with major cloud providers to offer fully managed OpenShift:

[cols="1,2,1"]
|===
|Service |Description |Managed By

|**ROSA**
|Red Hat OpenShift Service on AWS
|Red Hat + AWS

|**ARO**
|Azure Red Hat OpenShift
|Red Hat + Microsoft

|**OpenShift Dedicated**
|Managed OpenShift on Google Cloud
|Red Hat

|**OpenShift on IBM Cloud**
|Managed OpenShift on IBM infrastructure
|IBM + Red Hat
|===

**Benefits of managed services:**

* 24x7 Site Reliability Engineering (SRE) coverage
* Automated upgrades and patching
* Joint support from Red Hat and cloud provider
* Focus on apps, not infrastructure management

=== Self-Managed Installations

OpenShift can be installed on virtually any infrastructure:

**Public Clouds:**

* Amazon Web Services (AWS)
* Microsoft Azure
* Google Cloud Platform (GCP)
* IBM Cloud
* Alibaba Cloud
* Oracle Cloud

**Private Infrastructure:**

* VMware vSphere
* Red Hat OpenStack
* Nutanix
* Bare Metal servers
* IBM Z and LinuxONE
* IBM Power

**Edge & Specialized:**

* Single Node OpenShift (SNO)
* Three-node clusters
* Agent-based installation for disconnected environments

=== The Value: Consistency Across All Platforms

No matter where OpenShift runs, you get:

* **Same CLI** - `oc` commands work identically
* **Same APIs** - Kubernetes + OpenShift APIs everywhere
* **Same Operators** - OperatorHub catalog available on all platforms
* **Same Security** - Consistent RBAC, SCC, network policies

This means your operations team learns OpenShift once and can manage clusters anywhere.

== How OpenShift Knows Its Platform

OpenShift stores infrastructure information in the `infrastructure` cluster resource:

[source,bash]
----
oc get infrastructure cluster -o yaml | grep -A5 "status:"
----

Example output on AWS:

----
status:
  apiServerInternalURI: https://api-int.cluster-xxxxx...
  apiServerURL: https://api.cluster-xxxxx...
  infrastructureName: cluster-xxxxx-xxxxx
  platform: AWS
  platformStatus:
    aws:
      region: us-east-2
----

**Key insight:** The `platform` field tells OpenShift which cloud provider APIs to use:

* `AWS` - Use EC2, EBS, ELB, Route53 APIs
* `Azure` - Use Azure Compute, Disk, Load Balancer APIs
* `GCP` - Use GCE, Persistent Disk, Cloud Load Balancing APIs
* `VSphere` - Use vCenter APIs
* `BareMetal` - Use IPMI/Redfish for bare metal management
* `None` - Platform-agnostic (no cloud integration)

== Storage Abstraction

=== Storage Classes

Storage classes define *how* storage is provisioned. OpenShift auto-configures storage classes for your platform:

**Example on AWS:**

----
NAME                                    PROVISIONER
gp2-csi                                 ebs.csi.aws.com
gp3-csi                                 ebs.csi.aws.com
----

**Example on Azure:**

----
NAME                                    PROVISIONER
managed-csi                             disk.csi.azure.com
managed-csi-premium                     disk.csi.azure.com
----

**Example on VMware:**

----
NAME                                    PROVISIONER
thin-csi                                csi.vsphere.vmware.com
----

**With ODF (any platform):**

----
NAME                                    PROVISIONER
ocs-storagecluster-ceph-rbd             openshift-storage.rbd.csi.ceph.com
ocs-storagecluster-cephfs               openshift-storage.cephfs.csi.ceph.com
openshift-storage.noobaa.io             openshift-storage.noobaa.io/obc
----

**The benefit:** Developers request storage with a PVC. They don't need to know if it's AWS EBS, Azure Disk, or Ceph. OpenShift handles it.

=== CSI Drivers

CSI (Container Storage Interface) drivers connect OpenShift to storage backends:

[cols="1,2"]
|===
|Platform |CSI Driver

|AWS
|`ebs.csi.aws.com`

|Azure
|`disk.csi.azure.com`

|GCP
|`pd.csi.storage.gke.io`

|VMware
|`csi.vsphere.vmware.com`

|ODF (any platform)
|`openshift-storage.rbd.csi.ceph.com`
|===

**How it works:**

1. Developer creates a PVC requesting storage
2. OpenShift looks up the storage class
3. CSI driver calls the appropriate cloud/storage API
4. Volume is created and attached to the pod
5. All of this is automatic and transparent

=== OpenShift Data Foundation (ODF)

ODF provides software-defined storage that works on **any** infrastructure:

* **Block storage** (Ceph RBD) - For databases, stateful apps
* **File storage** (CephFS) - For shared filesystems
* **Object storage** (NooBaa) - S3-compatible for backups, logs

**Why ODF matters:**

* Same storage capabilities on AWS, Azure, VMware, or bare metal
* Applications are truly portable across clouds
* No cloud-specific storage code in your applications
* Consistent backup/restore procedures everywhere

== Cross-Platform Comparison

The power of OpenShift is consistency. Here's how concepts map across platforms:

[cols="1,1,1,1,1"]
|===
|OpenShift Concept |AWS |Azure |GCP |VMware

|Platform Type
|`AWS`
|`Azure`
|`GCP`
|`VSphere`

|Default Storage Class
|`gp3-csi`
|`managed-csi`
|`standard-csi`
|`thin-csi`

|CSI Driver
|`ebs.csi.aws.com`
|`disk.csi.azure.com`
|`pd.csi.storage.gke.io`
|`csi.vsphere.vmware.com`

|Load Balancer
|AWS NLB/ALB
|Azure LB
|GCP LB
|MetalLB/F5

|Machine API
|EC2 instances
|Azure VMs
|GCE instances
|vSphere VMs
|===

**The key point:** The `oc` commands work identically on any platform. Learn once, use everywhere.

== Infrastructure Scaling

On **Installer Provisioned Infrastructure (IPI)** clusters, OpenShift can manage infrastructure directly:

[source,bash]
----
# View machine sets
oc get machinesets -n openshift-machine-api

# Scale workers
oc scale machineset <name> --replicas=4 -n openshift-machine-api
----

**What happens when you scale on different platforms:**

[cols="1,2"]
|===
|Platform |Scaling Action

|AWS
|Launches new EC2 instances via AWS API

|Azure
|Creates new Azure VMs via Azure API

|GCP
|Creates new GCE instances via GCP API

|VMware
|Clones VMs via vCenter API

|Bare Metal
|Provisions physical servers via IPMI/Redfish
|===

In all cases:
1. OpenShift calls the platform API
2. Installs RHEL CoreOS automatically
3. Joins the node to the cluster
4. Marks it Ready

Same `oc scale` command, different backend - complete abstraction.

== Key Reference Commands

These commands work on any OpenShift cluster:

[source,bash]
----
# Check cloud platform
oc get infrastructure cluster -o jsonpath='{.status.platform}'

# View nodes
oc get nodes -o wide

# Check capacity
oc adm top nodes

# List storage classes
oc get storageclasses

# View CSI drivers
oc get csidrivers

# Check ODF status (if installed)
oc get storagecluster -n openshift-storage

# View provisioned volumes
oc get pv
----

== Key Takeaways

* **Run Anywhere** - OpenShift supports AWS, Azure, GCP, IBM Cloud, VMware, bare metal, and more
* **Managed Options** - ROSA, ARO, and OpenShift Dedicated provide fully managed experiences
* **Platform Abstraction** - OpenShift knows its cloud and uses native APIs automatically
* **Consistent Operations** - Same `oc` commands work on any infrastructure
* **ODF Portability** - Software-defined storage works identically across all platforms
* **No Cloud Console Hopping** - Manage infrastructure through OpenShift, not cloud provider UIs

== Why This Matters for Your Organization

[cols="1,2"]
|===
|Challenge |OpenShift Solution

|**Multi-cloud strategy**
|Same platform on AWS, Azure, and on-prem

|**Avoid vendor lock-in**
|Applications portable across any infrastructure

|**Skills efficiency**
|One team manages all clusters consistently

|**Hybrid cloud**
|Seamless operations across public and private clouds

|**Edge deployments**
|Single node and three-node options for remote sites
|===

== Additional Resources

* **OpenShift Platforms:** link:https://docs.openshift.com/container-platform/4.20/installing/index.html[Installation Overview]
* **ROSA:** link:https://docs.openshift.com/rosa/[Red Hat OpenShift Service on AWS]
* **ARO:** link:https://docs.microsoft.com/azure/openshift/[Azure Red Hat OpenShift]
* **ODF:** link:https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/[OpenShift Data Foundation]
